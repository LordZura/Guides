# TourGuideHub - Visual Architecture & Design Diagrams

> **Visual Reference**: This document provides visual representations of the system architecture, data flows, and user interactions for TourGuideHub.

---

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT BROWSER                              â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    React SPA (TypeScript)                     â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚   Pages     â”‚  â”‚ Components  â”‚  â”‚  Contexts   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚   (5)       â”‚  â”‚   (29)      â”‚  â”‚   (8)       â”‚         â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ - Explore   â”‚  â”‚ - TourCard  â”‚  â”‚ - Auth      â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ - Details   â”‚  â”‚ - Booking   â”‚  â”‚ - Tours     â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ - Dashboard â”‚  â”‚ - Reviews   â”‚  â”‚ - Bookings  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ - Profile   â”‚  â”‚ - Navbar    â”‚  â”‚ - Reviews   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ - Guides    â”‚  â”‚ - ...       â”‚  â”‚ - Notify    â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚         â”‚                 â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â”‚                           â”‚                                   â”‚  â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                           â”‚  â”‚
â”‚  â”‚                    â”‚   Router    â”‚                           â”‚  â”‚
â”‚  â”‚                    â”‚ (React)     â”‚                           â”‚  â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                      â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                    â”‚  Supabase Client  â”‚                           â”‚
â”‚                    â”‚   (JS Library)    â”‚                           â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ HTTPS
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SUPABASE CLOUD                              â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚     Auth     â”‚  â”‚  PostgreSQL  â”‚  â”‚  Real-time   â”‚            â”‚
â”‚  â”‚   Service    â”‚  â”‚   Database   â”‚  â”‚   Engine     â”‚            â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚            â”‚
â”‚  â”‚ - JWT Auth   â”‚  â”‚ - 7 Tables   â”‚  â”‚ - WebSocket  â”‚            â”‚
â”‚  â”‚ - Sessions   â”‚  â”‚ - RLS        â”‚  â”‚ - Pub/Sub    â”‚            â”‚
â”‚  â”‚ - Providers  â”‚  â”‚ - Functions  â”‚  â”‚ - Changes    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - Triggers   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                    â”‚ - Indexes    â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   Storage    â”‚                     â”‚   PostgREST  â”‚            â”‚
â”‚  â”‚   (Files)    â”‚                     â”‚  (Auto API)  â”‚            â”‚
â”‚  â”‚              â”‚                     â”‚              â”‚            â”‚
â”‚  â”‚ - Avatars    â”‚                     â”‚ - REST API   â”‚            â”‚
â”‚  â”‚ - Images     â”‚                     â”‚ - CRUD Ops   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ auth.users  â”‚ (Supabase managed)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:1
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              profiles                           â”‚
â”‚  - id (FK â†’ auth.users.id)                     â”‚
â”‚  - full_name, phone, avatar_url                â”‚
â”‚  - role: 'guide' | 'tourist'                   â”‚
â”‚  - bio, interests[], languages[]               â”‚
â”‚  - experience_years (guides)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚
       â”‚ 1:N              â”‚ 1:N
       â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   tours     â”‚    â”‚   bookings          â”‚
â”‚  - creator  â”‚â—„â”€â”€â”€â”¤  - tourist_id (FK)  â”‚
â”‚  - title    â”‚ N:1â”‚  - guide_id (FK)    â”‚
â”‚  - price    â”‚    â”‚  - tour_id (FK)     â”‚
â”‚  - location â”‚    â”‚  - status           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚  - payment_status   â”‚
       â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚
       â”‚ 1:N              â”‚
       â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   reviews         â”‚     â”‚
â”‚  - reviewer_id    â”‚     â”‚
â”‚  - target_id      â”‚â—„â”€â”€â”€â”€â”˜
â”‚  - target_type    â”‚
â”‚  - rating (1-5)   â”‚
â”‚  - comment        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  notifications    â”‚    â”‚  tour_templates    â”‚
â”‚  - recipient_id   â”‚    â”‚  - creator_id      â”‚
â”‚  - actor_id       â”‚    â”‚  - template_data   â”‚
â”‚  - type, message  â”‚    â”‚  - is_system       â”‚
â”‚  - action_url     â”‚    â”‚  - category        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  languages    â”‚ (Standalone reference table)
â”‚  - code       â”‚
â”‚  - name       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Booking Flow Diagram

### Tourist-Initiated Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TOURIST BOOKING REQUEST                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    TOURIST                      SYSTEM                    GUIDE
       â”‚                           â”‚                         â”‚
       â”‚   Browse Tours            â”‚                         â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚
       â”‚   View Tour Details       â”‚                         â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚
       â”‚                           â”‚                         â”‚
       â”‚   Submit Booking          â”‚                         â”‚
       â”‚   (date, guests)          â”‚                         â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚
       â”‚                           â”‚   Create Booking        â”‚
       â”‚                           â”‚   status: 'requested'   â”‚
       â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                           â”‚   Send Notification     â”‚
       â”‚                           â”‚   type: booking_request â”‚
       â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                           â”‚                         â”‚
       â”‚                           â”‚        Review Request   â”‚
       â”‚                           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                           â”‚                         â”‚
       â”‚                           â”‚   Accept/Decline        â”‚
       â”‚   Update Status           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   status: 'accepted'    â”‚
       â”‚   Notification            â”‚                         â”‚
       â”‚   type: booking_accepted  â”‚                         â”‚
       â”‚                           â”‚                         â”‚
       â”‚   Confirm Payment         â”‚                         â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚
       â”‚                           â”‚   Update Status         â”‚
       â”‚                           â”‚   status: 'paid'        â”‚
       â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                           â”‚   Notification          â”‚
       â”‚                           â”‚                         â”‚
       â”‚   [Tour Date]             â”‚                         â”‚
       â”‚   Attend Tour             â”‚                         â”‚
       â”‚                           â”‚                         â”‚
       â”‚                           â”‚   Mark Complete         â”‚
       â”‚   Update Status           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   status: 'completed'   â”‚
       â”‚                           â”‚                         â”‚
       â”‚   Leave Review            â”‚                         â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚
       â”‚                           â”‚   Notify Guide          â”‚
       â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                           â”‚   type: review_received â”‚
       â”‚                           â”‚                         â”‚
```

### Guide-Initiated Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GUIDE CUSTOM OFFER                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    GUIDE                        SYSTEM                   TOURIST
       â”‚                           â”‚                         â”‚
       â”‚   Create Custom Offer     â”‚                         â”‚
       â”‚   (specific tourist)      â”‚                         â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚
       â”‚                           â”‚   Create Booking        â”‚
       â”‚                           â”‚   status: 'offered'     â”‚
       â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                           â”‚   Send Notification     â”‚
       â”‚                           â”‚   type: booking_offered â”‚
       â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                           â”‚                         â”‚
       â”‚                           â”‚   Review Offer          â”‚
       â”‚                           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                           â”‚                         â”‚
       â”‚                           â”‚   Accept/Decline        â”‚
       â”‚   Update Status           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   status: 'accepted'    â”‚
       â”‚   Notification            â”‚                         â”‚
       â”‚                           â”‚                         â”‚
       â”‚   [Rest same as above]    â”‚                         â”‚
```

---

## ğŸ” Row Level Security (RLS) Policy Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 CLIENT REQUEST                            â”‚
â”‚  "SELECT * FROM tours WHERE creator_id = 'abc123'"       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Authenticated Request
                      â”‚ (JWT Token in Header)
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SUPABASE AUTH SERVICE                       â”‚
â”‚  1. Validate JWT Token                                   â”‚
â”‚  2. Extract user_id from token                          â”‚
â”‚  3. Set auth.uid() = user_id                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Request + auth.uid()
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            POSTGRESQL RLS ENGINE                         â”‚
â”‚  1. Check if RLS enabled on table                       â”‚
â”‚  2. Find applicable policies for operation (SELECT)     â”‚
â”‚  3. Evaluate policy conditions                          â”‚
â”‚     âœ“ "Anyone can view active tours"                    â”‚
â”‚       USING (is_active = true)                          â”‚
â”‚     âœ“ "Users can view their own tours"                  â”‚
â”‚       USING (creator_id = auth.uid())                   â”‚
â”‚  4. Combine policies with OR logic                      â”‚
â”‚  5. Apply to query                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Filtered Query
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DATABASE EXECUTION                          â”‚
â”‚  SELECT * FROM tours                                     â”‚
â”‚  WHERE (is_active = true OR creator_id = 'current_user')â”‚
â”‚    AND creator_id = 'abc123'                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Results (only authorized rows)
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CLIENT                                 â”‚
â”‚  Receives only data user is authorized to see           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Component Hierarchy

```
App
â”œâ”€â”€ ErrorBoundary
â”‚   â””â”€â”€ ChakraProvider
â”‚       â””â”€â”€ BrowserRouter
â”‚           â””â”€â”€ AuthProvider
â”‚               â””â”€â”€ ModalProvider
â”‚                   â””â”€â”€ NotificationProvider
â”‚                       â””â”€â”€ TourTemplateProvider
â”‚                           â””â”€â”€ ReviewsProvider
â”‚                               â”œâ”€â”€ NavBar
â”‚                               â”‚   â”œâ”€â”€ Logo
â”‚                               â”‚   â”œâ”€â”€ Navigation Links
â”‚                               â”‚   â”œâ”€â”€ NotificationBadge
â”‚                               â”‚   â”‚   â””â”€â”€ NotificationsList
â”‚                               â”‚   â””â”€â”€ UserMenu / AuthButtons
â”‚                               â”‚
â”‚                               â””â”€â”€ Routes
â”‚                                   â”œâ”€â”€ Explore Page
â”‚                                   â”‚   â”œâ”€â”€ Tabs (Tours | Guides)
â”‚                                   â”‚   â”œâ”€â”€ Filters
â”‚                                   â”‚   â”‚   â”œâ”€â”€ Language Select
â”‚                                   â”‚   â”‚   â”œâ”€â”€ Location Select
â”‚                                   â”‚   â”‚   â”œâ”€â”€ Price Range
â”‚                                   â”‚   â”‚   â”œâ”€â”€ Rating Filter
â”‚                                   â”‚   â”‚   â””â”€â”€ Day Availability
â”‚                                   â”‚   â””â”€â”€ Results Grid
â”‚                                   â”‚       â”œâ”€â”€ TourCard (Ã—N)
â”‚                                   â”‚       â””â”€â”€ GuideCard (Ã—N)
â”‚                                   â”‚
â”‚                                   â”œâ”€â”€ Tour Details Page
â”‚                                   â”‚   â”œâ”€â”€ Tour Header
â”‚                                   â”‚   â”œâ”€â”€ Tour Info
â”‚                                   â”‚   â”œâ”€â”€ Location Itinerary
â”‚                                   â”‚   â”œâ”€â”€ BookingForm
â”‚                                   â”‚   â”œâ”€â”€ Guide Profile
â”‚                                   â”‚   â””â”€â”€ Reviews Section
â”‚                                   â”‚       â”œâ”€â”€ ReviewsSummary
â”‚                                   â”‚       â””â”€â”€ ReviewsList
â”‚                                   â”‚           â””â”€â”€ ReviewItem (Ã—N)
â”‚                                   â”‚
â”‚                                   â”œâ”€â”€ Dashboard Page
â”‚                                   â”‚   â”œâ”€â”€ Profile Header
â”‚                                   â”‚   â””â”€â”€ Role-Based Tabs
â”‚                                   â”‚       â”œâ”€â”€ Tourist Dashboard
â”‚                                   â”‚       â”‚   â”œâ”€â”€ BookingsList
â”‚                                   â”‚       â”‚   â”œâ”€â”€ ReviewsList
â”‚                                   â”‚       â”‚   â””â”€â”€ ProfileEditor
â”‚                                   â”‚       â””â”€â”€ Guide Dashboard
â”‚                                   â”‚           â”œâ”€â”€ ToursList
â”‚                                   â”‚           â”œâ”€â”€ BookingsList
â”‚                                   â”‚           â”œâ”€â”€ PaymentTracker
â”‚                                   â”‚           â”œâ”€â”€ ReviewsList
â”‚                                   â”‚           â””â”€â”€ ProfileEditor
â”‚                                   â”‚
â”‚                                   â””â”€â”€ Profile Page
â”‚                                       â”œâ”€â”€ Guide Info
â”‚                                       â”œâ”€â”€ Tours Grid
â”‚                                       â””â”€â”€ Reviews Section
â”‚
â””â”€â”€ AuthModal (if isAuthModalOpen)
    â”œâ”€â”€ Sign In Form
    â””â”€â”€ Sign Up Form
        â””â”€â”€ Role Selection (Guide | Tourist)
```

---

## ğŸŒŠ Data Flow - Review System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   REVIEW CREATION FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Action                Database                    UI Update
    â”‚                          â”‚                           â”‚
    â”‚  Submit Review           â”‚                           â”‚
    â”‚  (rating + comment)      â”‚                           â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
    â”‚                          â”‚   1. Insert into reviews  â”‚
    â”‚                          â”‚      table                â”‚
    â”‚                          â”‚                           â”‚
    â”‚                          â”‚   2. Trigger calculates   â”‚
    â”‚                          â”‚      new average          â”‚
    â”‚                          â”‚                           â”‚
    â”‚                          â”‚   3. Insert notification  â”‚
    â”‚                          â”‚      for target user      â”‚
    â”‚                          â”‚                           â”‚
    â”‚                          â”‚   4. Real-time event      â”‚
    â”‚                          â”‚      published            â”‚
    â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚  Success response        â”‚                           â”‚  Update UI
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚  - Show success
    â”‚                          â”‚                           â”‚  - Refresh reviews
    â”‚                          â”‚                           â”‚
    â”‚                          â”‚   Real-time listener      â”‚
    â”‚                          â”‚   receives update         â”‚
    â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                          â”‚                           â”‚  Update notification
    â”‚                          â”‚                           â”‚  badge count
    â”‚                          â”‚                           â”‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   REVIEW AGGREGATION FLOW                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

For TOUR reviews:
    reviews table
        â”‚
        â”‚ Direct query
        â–¼
    get_review_summary('tour_id', 'tour')
        â”‚
        â”œâ”€â–º average_rating: AVG(rating)
        â”œâ”€â–º total_reviews: COUNT(*)
        â””â”€â–º rating_counts: { '1': X, '2': Y, ... }

For GUIDE reviews:
    reviews table
        â”‚
        â”œâ”€â–º Direct guide reviews
        â”‚   (target_type = 'guide')
        â”‚
        â””â”€â–º All tour reviews
            (target_type = 'tour' AND tours.creator_id = guide_id)
            â”‚
            â”‚ Union all ratings
            â–¼
    get_review_summary('guide_id', 'guide')
        â”‚
        â”œâ”€â–º average_rating: AVG(all_ratings)
        â”œâ”€â–º total_reviews: COUNT(all_reviews)
        â””â”€â–º rating_counts: { '1': X, '2': Y, ... }
```

---

## ğŸ”” Real-time Notification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              REAL-TIME NOTIFICATION SYSTEM                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ACTION                        DATABASE                  SUBSCRIBERS
  â”‚                              â”‚                           â”‚
  â”‚  Guide accepts booking       â”‚                           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
  â”‚                              â”‚   1. Update bookings      â”‚
  â”‚                              â”‚      status = 'accepted'  â”‚
  â”‚                              â”‚                           â”‚
  â”‚                              â”‚   2. Insert notification  â”‚
  â”‚                              â”‚      recipient_id = touristâ”‚
  â”‚                              â”‚      type = 'booking_accepted'â”‚
  â”‚                              â”‚                           â”‚
  â”‚                              â”‚   3. Real-time event      â”‚
  â”‚                              â”‚      INSERT on notificationsâ”‚
  â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                              â”‚   WebSocket push          â”‚
  â”‚                              â”‚                           â”‚
  â”‚                              â”‚   Supabase Real-time      â”‚
  â”‚                              â”‚   broadcasts change       â”‚
  â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                              â”‚                           â”‚  Tourist's browser
  â”‚                              â”‚                           â”‚  receives event
  â”‚                              â”‚                           â”‚
  â”‚                              â”‚                           â”œâ”€â–º Update badge count
  â”‚                              â”‚                           â”œâ”€â–º Add to notification list
  â”‚                              â”‚                           â””â”€â–º Show toast (optional)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              NOTIFICATION SUBSCRIPTION SETUP                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Component Mount
    â”‚
    â–¼
NotificationContext.tsx
    â”‚
    â”œâ”€â–º supabase.channel('notifications')
    â”‚       .on('postgres_changes', {
    â”‚           event: 'INSERT',
    â”‚           schema: 'public',
    â”‚           table: 'notifications',
    â”‚           filter: `recipient_id=eq.${userId}`
    â”‚       }, handleNewNotification)
    â”‚       .subscribe()
    â”‚
    â””â”€â–º On new notification:
            1. Add to notifications array
            2. Increment unread count
            3. Update UI state

Component Unmount
    â”‚
    â””â”€â–º channel.unsubscribe()
```

---

## ğŸ“± Responsive Layout Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MOBILE (0-767px)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â˜°  Logo                         ğŸ”” ğŸ‘¤               â”‚  â”‚ Navbar
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ” Search                                           â”‚  â”‚ Search
â”‚  â”‚  [Filter Button]                                     â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚         Tour Card 1                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Image                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Title, Price                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â­â­â­â­â­ (123)                                 â”‚ â”‚  â”‚ 1 Column
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ Grid
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚         Tour Card 2                             â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TABLET (768-991px)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Logo    Home  Explore  About      ğŸ”” ğŸ‘¤ Login       â”‚  â”‚ Navbar
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Filters        â”‚  ğŸ” Search                           â”‚â”‚ Sidebar
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€        â”‚                                      â”‚â”‚ + Content
â”‚  â”‚  Language: All  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚â”‚
â”‚  â”‚  Location: All  â”‚  â”‚  Tour 1    â”‚  â”‚  Tour 2    â”‚    â”‚â”‚ 2 Column
â”‚  â”‚  Price: $0-500  â”‚  â”‚  Image     â”‚  â”‚  Image     â”‚    â”‚â”‚ Grid
â”‚  â”‚  Rating: All    â”‚  â”‚  Details   â”‚  â”‚  Details   â”‚    â”‚â”‚
â”‚  â”‚                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚â”‚
â”‚  â”‚  [Apply]        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DESKTOP (992px+)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Logo    Home  Explore  Guides  About   ğŸ”” ğŸ‘¤ Login  â”‚  â”‚ Full Navbar
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Filters        â”‚  ğŸ” Search           [Sort â–¼]        â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€        â”‚                                      â”‚â”‚
â”‚  â”‚  Language       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”        â”‚â”‚ 3-4 Column
â”‚  â”‚  â–¡ English      â”‚  â”‚Tour 1â”‚ â”‚Tour 2â”‚ â”‚Tour 3â”‚        â”‚â”‚ Grid
â”‚  â”‚  â–¡ Spanish      â”‚  â”‚Image â”‚ â”‚Image â”‚ â”‚Image â”‚        â”‚â”‚
â”‚  â”‚  â–¡ French       â”‚  â”‚Info  â”‚ â”‚Info  â”‚ â”‚Info  â”‚        â”‚â”‚
â”‚  â”‚                 â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜        â”‚â”‚
â”‚  â”‚  Location       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”        â”‚â”‚
â”‚  â”‚  â–¡ Tbilisi      â”‚  â”‚Tour 4â”‚ â”‚Tour 5â”‚ â”‚Tour 6â”‚        â”‚â”‚
â”‚  â”‚  â–¡ Batumi       â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜        â”‚â”‚
â”‚  â”‚                 â”‚                                      â”‚â”‚
â”‚  â”‚  Price Range    â”‚  [Load More]                        â”‚â”‚
â”‚  â”‚  $0 â•â•â•â—â•â•â• $500â”‚                                      â”‚â”‚
â”‚  â”‚                 â”‚                                      â”‚â”‚
â”‚  â”‚  Rating         â”‚                                      â”‚â”‚
â”‚  â”‚  â­â­â­â­â­    â”‚                                      â”‚â”‚
â”‚  â”‚                 â”‚                                      â”‚â”‚
â”‚  â”‚  [Reset]        â”‚                                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ User Journey Maps

### Tourist Journey
```
1. DISCOVERY
   â””â”€â–º Visit /explore
       â””â”€â–º Browse tours
           â”œâ”€â–º Apply filters (location, language, price)
           â”œâ”€â–º View tour cards
           â””â”€â–º Click "View Details"

2. EVALUATION
   â””â”€â–º Tour Details Page
       â”œâ”€â–º Read description
       â”œâ”€â–º View itinerary
       â”œâ”€â–º Check reviews (â­ rating + comments)
       â”œâ”€â–º View guide profile
       â””â”€â–º Decide to book

3. BOOKING
   â””â”€â–º Log in (if not authenticated)
       â””â”€â–º Fill booking form
           â”œâ”€â–º Select date
           â”œâ”€â–º Choose number of guests
           â”œâ”€â–º Add special requests
           â””â”€â–º Submit request (status: 'requested')

4. WAITING
   â””â”€â–º Receive notification
       â””â”€â–º Guide accepts booking
           â””â”€â–º Status: 'accepted'

5. PAYMENT
   â””â”€â–º Confirm payment
       â””â”€â–º Status: 'paid'
           â””â”€â–º Receive confirmation

6. EXPERIENCE
   â””â”€â–º Attend tour on scheduled date
       â””â”€â–º Guide marks as complete
           â””â”€â–º Status: 'completed'

7. REVIEW
   â””â”€â–º Receive notification to review
       â””â”€â–º Submit review
           â”œâ”€â–º Rate tour (1-5 stars)
           â”œâ”€â–º Write comment
           â””â”€â–º Submit
```

### Guide Journey
```
1. SETUP
   â””â”€â–º Create account (role: guide)
       â””â”€â–º Complete profile
           â”œâ”€â–º Add bio
           â”œâ”€â–º List languages
           â”œâ”€â–º Specify experience
           â””â”€â–º Upload avatar

2. TOUR CREATION
   â””â”€â–º Dashboard â†’ My Tours
       â””â”€â–º Create New Tour
           â”œâ”€â–º Option 1: Use Template
           â”‚   â””â”€â–º Select system/user template
           â”‚       â””â”€â–º Customize details
           â”œâ”€â–º Option 2: From Scratch
           â”‚   â””â”€â–º Fill all fields
           â”‚       â”œâ”€â–º Title, description
           â”‚       â”œâ”€â–º Multi-location itinerary
           â”‚       â”œâ”€â–º Pricing, capacity
           â”‚       â”œâ”€â–º Languages, days available
           â”‚       â””â”€â–º Publish
           â””â”€â–º Tour becomes active

3. BOOKING MANAGEMENT
   â””â”€â–º Receive booking request
       â”œâ”€â–º Option A: Accept Request
       â”‚   â””â”€â–º Status: 'accepted'
       â”‚       â””â”€â–º Notify tourist
       â””â”€â–º Option B: Decline Request
           â””â”€â–º Status: 'declined'

   OR

   â””â”€â–º Create Custom Offer
       â””â”€â–º Select tourist, tour, date
           â””â”€â–º Status: 'offered'
               â””â”€â–º Notify tourist
                   â””â”€â–º Tourist accepts
                       â””â”€â–º Status: 'accepted'

4. PRE-TOUR
   â””â”€â–º Tourist confirms payment
       â””â”€â–º Status: 'paid'
           â””â”€â–º Prepare for tour

5. TOUR DELIVERY
   â””â”€â–º Conduct tour on scheduled date
       â””â”€â–º Mark as complete
           â””â”€â–º Status: 'completed'

6. POST-TOUR
   â””â”€â–º Receive review notification
       â””â”€â–º View review
           â””â”€â–º Rating updates automatically
               â””â”€â–º Appears on profile and tours

7. EARNINGS
   â””â”€â–º Track payments in dashboard
       â”œâ”€â–º View total earnings
       â”œâ”€â–º Monitor pending payments
       â””â”€â–º See earnings by tour
```

---

## ğŸ” Search & Filter Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FILTER APPLICATION                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Input                    Frontend Filter           Database Query
    â”‚                              â”‚                         â”‚
    â”‚  Select Language: Spanish    â”‚                         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚
    â”‚                              â”‚  Filter state updated   â”‚
    â”‚                              â”‚  { language: 'es' }     â”‚
    â”‚                              â”‚                         â”‚
    â”‚  Select Location: Tbilisi    â”‚                         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚
    â”‚                              â”‚  { language: 'es',      â”‚
    â”‚                              â”‚    location: 'Tbilisi' }â”‚
    â”‚                              â”‚                         â”‚
    â”‚  Set Price: $0-100           â”‚                         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                         â”‚
    â”‚                              â”‚  { language: 'es',      â”‚
    â”‚                              â”‚    location: 'Tbilisi', â”‚
    â”‚                              â”‚    priceMin: 0,         â”‚
    â”‚                              â”‚    priceMax: 100 }      â”‚
    â”‚                              â”‚                         â”‚
    â”‚                              â”‚  Build query            â”‚
    â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                              â”‚  SELECT * FROM tours    â”‚
    â”‚                              â”‚  WHERE                  â”‚
    â”‚                              â”‚    'es' = ANY(languages)â”‚
    â”‚                              â”‚    AND location ILIKE   â”‚
    â”‚                              â”‚      '%Tbilisi%'        â”‚
    â”‚                              â”‚    AND price BETWEEN    â”‚
    â”‚                              â”‚      0 AND 100          â”‚
    â”‚                              â”‚    AND is_active = true â”‚
    â”‚                              â”‚                         â”‚
    â”‚                              â”‚  Execute query          â”‚
    â”‚  Results                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Return matching tours  â”‚
    â”‚  Display filtered tours      â”‚                         â”‚
    â”‚                              â”‚                         â”‚
```

---

## ğŸ“Š State Management Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CONTEXT PROVIDER PATTERN                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Component Tree
    â”‚
    â”œâ”€â–º ToursContext
    â”‚   â”‚
    â”‚   â”œâ”€â–º State:
    â”‚   â”‚   â”œâ”€ tours: Tour[]
    â”‚   â”‚   â”œâ”€ isLoading: boolean
    â”‚   â”‚   â””â”€ error: string | null
    â”‚   â”‚
    â”‚   â””â”€â–º Methods:
    â”‚       â”œâ”€ fetchTours(filters)
    â”‚       â”‚   â””â”€â–º Supabase query
    â”‚       â”‚       â””â”€â–º Set tours state
    â”‚       â”œâ”€ createTour(data)
    â”‚       â”‚   â””â”€â–º Supabase insert
    â”‚       â”‚       â””â”€â–º Append to tours
    â”‚       â””â”€ updateTour(id, data)
    â”‚           â””â”€â–º Supabase update
    â”‚               â””â”€â–º Update in tours array
    â”‚
    â”œâ”€â–º BookingContext
    â”‚   â”‚
    â”‚   â”œâ”€â–º State:
    â”‚   â”‚   â”œâ”€ bookings: Booking[]
    â”‚   â”‚   â””â”€ isLoading: boolean
    â”‚   â”‚
    â”‚   â””â”€â–º Methods:
    â”‚       â”œâ”€ createBooking(data)
    â”‚       â”œâ”€ updateStatus(id, status)
    â”‚       â””â”€ fetchBookings(role)
    â”‚
    â””â”€â–º NotificationContext
        â”‚
        â”œâ”€â–º State:
        â”‚   â”œâ”€ notifications: Notification[]
        â”‚   â””â”€ unreadCount: number
        â”‚
        â”œâ”€â–º Real-time Subscription:
        â”‚   â””â”€â–º supabase.channel()
        â”‚       â””â”€â–º On INSERT â†’ Add to array
        â”‚
        â””â”€â–º Methods:
            â”œâ”€ markAsRead(id)
            â””â”€ markAllAsRead()


Components access context via hooks:
    const { tours, fetchTours } = useTours();
    const { createBooking } = useBooking();
    const { notifications } = useNotifications();
```

---

This visual documentation provides diagrams and flows to complement the detailed technical specification in AI_RECREATION_PROMPT.md.
